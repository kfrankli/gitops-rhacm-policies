apiVersion: policy.open-cluster-management.io/v1
kind: PolicyGenerator
metadata:
  name: configuration-policies
policyDefaults:
  namespace: policies
  consolidateManifests: false
policies:
  - name: console-banner
    description: |
      This policy ensures that a console banner is present
    manifests:
      - path: manifests/console-banner
        pruneObjectBehavior: DeleteIfCreated
        remediationAction: enforce
  - name: f5-cis-configurations
    description: |
      This policy ensures f5 CIS is configured for HA BIG-IP using OVN-k8s iCNI with NO Tunnels
      * https://clouddocs.f5.com/containers/latest/userguide/openshift/openshift-4-12-cluster.html
      * https://github.com/mdditt2000/k8s-bigip-ctlr/tree/main/user_guides/ovn-kubernetes-ha#step-4-configure-egress-from-openshift-cluster-to-big-ip
    placement:
      labelSelector:
        matchExpressions:
          - key: local-cluster
            operator: NotIn
            values:
             - "true"
             - "True"
    manifests:
      - path: manifests/f5-cis
        pruneObjectBehavior: None
        remediationAction: inform